/* facilities */
DROP TABLE IF EXISTS DICFACILITIES;
CREATE TABLE DICFACILITIES(
   FACID   INT NOT NULL,
   FACCODE VARCHAR (20)     NOT NULL,
   FACNAME  VARCHAR (255)              NOT NULL,      
   PRIMARY KEY (FACID)
);

INSERT INTO DICFACILITIES VALUES (1, 'CHAI', 'CHAISA');
INSERT INTO DICFACILITIES VALUES (2, 'TBCJ', 'TB-CHILENJE');
INSERT INTO DICFACILITIES VALUES (3, 'ARV-L', 'ARV-LINDA');
INSERT INTO DICFACILITIES VALUES (4, 'HIV-CH', 'HIV-CHAWAMA');
INSERT INTO DICFACILITIES VALUES (5, 'CV-EM', 'CV-EMMASDALE');

SELECT * FROM DICFACILITIES;

/* doctors */
CREATE TABLE DICDOCTORS(
   DOCID   INT              NOT NULL,
   DOCCODE VARCHAR (20)     NOT NULL,
   DOCNAME  VARCHAR (255)              NOT NULL,      
   PRIMARY KEY (DOCID)
);
INSERT INTO DBO.DICDOCTORS VALUES (1, 'ARV', 'Antiretroviral');
INSERT INTO DBO.DICDOCTORS VALUES (2, 'EMRG', 'EMRG STUDY');
INSERT INTO DBO.DICDOCTORS VALUES (3, 'TB', 'TUBERCULOSIS');
INSERT INTO DBO.DICDOCTORS VALUES (4, 'HIV', 'HIV AND AIDS');
INSERT INTO DBO.DICDOCTORS VALUES (5, 'OBGY', 'OBS AND GYN');

/* PATIENT*/
CREATE TABLE PATIENTS(
   PATID INT NOT NULL,
   FNAME VARCHAR (255) NOT NULL,
   LANAME VARCHAR (255) NOT NULL,
   NRC VARCHAR (255) NOT NULL, 
   DOB DATE NOT NULL, 
   SEX VARCHAR (10) NOT NULL, 
   PRIMARY KEY (PATID)
);
INSERT INTO PATIENTS VALUES (1, 'JOHN', 'DOE', '123456/11/1', '01-01-1970', 'M');
INSERT INTO PATIENTS VALUES (2, 'JANE', 'DOE', '123457/11/1', '01-01-1990', 'M');
INSERT INTO PATIENTS VALUES (3, 'BWALYA', 'MUSONDA', '123458/11/1', '01-01-2000', 'F');
INSERT INTO PATIENTS VALUES (4, 'MULENGA', 'CHIBWE', '123459/11/1', '01-01-2010', 'F');
INSERT INTO PATIENTS VALUES (5, 'WELUZANI', 'BANDA', '123410/11/1', '01-01-2020', 'F');
INSERT INTO PATIENTS VALUES (6, 'WELLINGTON', 'ZIMBA', '123411/11/1', '01-01-2021', 'M');

SELECT * FROM PATIENTS;

/* requests */
CREATE TABLE REQUESTS(
   REQUESTID INT NOT NULL,
   RECEIVEDDATE DATE NOT NULL,
   ACCESSNO INT NOT NULL
   PRIMARY KEY (REQUESTID),
   FACILITYID INT FOREIGN KEY REFERENCES DICFACILITIES(FACID),
   DOCTORID INT FOREIGN KEY REFERENCES DICDOCTORS(DOCID),
   PATIENTID INT FOREIGN KEY REFERENCES PATIENTS(PATID)
);
INSERT INTO REQUESTS VALUES (1, '05-05-2020', 123456, 1, 1, 1);
INSERT INTO REQUESTS VALUES (2, '08-30-2018', 123457, 2, 5, 4);
INSERT INTO REQUESTS VALUES (3, '09-11-2018', 123458, 3, 4, 2);
INSERT INTO REQUESTS VALUES (4, '10-25-2019', 123459, 1, 3, 3);
INSERT INTO REQUESTS VALUES (5, '11-06-2021', 1234510, 4, 2, 5);
SELECT * FROM REQUESTS;

/* DOCTOR REQUESTS */
CREATE TABLE DOCTORS(
   REQDOCID INT NOT NULL,
   PRIMARY KEY (REQDOCID),
   REQUESTID INT FOREIGN KEY REFERENCES REQUESTS(REQUESTID),
   DOCID INT FOREIGN KEY REFERENCES DICDOCTORS(DOCID)
);

INSERT INTO 

/* FACILITIES - REQUESTS*/
CREATE TABLE FACILITIES(
   REQFACID INT NOT NULL,
   PRIMARY KEY (REQFACID),
   REQUESTID INT FOREIGN KEY REFERENCES REQUESTS(REQUESTID)
);

/* DIC TESTS*/
CREATE TABLE DICTESTS(
   TESTID INT NOT NULL,
   TESTCODE VARCHAR (255) NOT NULL,
   TESTNAME VARCHAR (255) NOT NULL,
   TESTPRICE INT NOT NULL
   PRIMARY KEY (TESTID)
);

/* TESTS */
CREATE TABLE TESTS(
   REQTESTID INT NOT NULL,
   RESULTVALUE INT NOT NULL,
   PRIMARY KEY (REQTESTID),
   TESTID INT FOREIGN KEY REFERENCES DICTESTS(TESTID),
   REQUESTID INT FOREIGN KEY REFERENCES REQUESTS(REQUESTID)
);

